<!DOCTYPE html> <html lang="en"> <head><!-- Primary Meta Tags --><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta name="title" content="Open mailto links with terminal applications on MacOS"><meta name="description" content="Set terminal applications and programs such as aerc, mutt or neomutt as valid default mail clients for mailto links on MacOS"><meta name="robots" content="all"><!-- browser tab title --><title>tjex • Open mailto links with terminal applications on MacOS</title><!-- RSS --><link rel="alternate" type="application/rss+xml" title="Tillman Jex : tjex.net" href="https://tjex.net/rss.xml"><!-- Canonical --><link rel="canonical" href="https://tjex.net/hacks/open-mailto-links-with-terminal-programs/"><!-- Favicons --><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="48x48" href="/favicon/favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://tjex.net/hacks/open-mailto-links-with-terminal-programs/"><meta property="og:title" content="Open mailto links with terminal applications on MacOS"><meta property="og:description" content="Set terminal applications and programs such as aerc, mutt or neomutt as valid default mail clients for mailto links on MacOS"><meta property="og:image" content="https://tjex.net/img/profile-square.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://tjex.net/hacks/open-mailto-links-with-terminal-programs/"><meta property="twitter:title" content="Open mailto links with terminal applications on MacOS"><meta property="twitter:description" content="Set terminal applications and programs such as aerc, mutt or neomutt as valid default mail clients for mailto links on MacOS"><meta property="twitter:image" content="https://tjex.net/img/profile-square.jpg"> <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Open mailto links with terminal applications on MacOS","url":"https://tjex.net/blog/open-mailto-links-with-terminal-programs","datePublished":"Sat May 25 2024 12:53:43 GMT+0200 (Central European Summer Time)","description":"Set terminal applications and programs such as aerc, mutt or neomutt as valid default mail clients for mailto links on MacOS","author":{"@type":"Person","name":"tjex","image":{"@type":"ImageObject","url":"https://tjex.net/img/profile-square.jpg","width":488,"height":488},"url":"https://tjex.net","sameAs":["https://tjex.net/blog","undefined","undefined"]},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tjex.net/blog/"}}</script> <link rel="stylesheet" href="/_astro/_page_.WUPP2ssZ.css">
<style>#themeToggle[data-astro-cid-lfoluaxz]{width:70px;height:70px;flex:0 0 auto}
</style><script type="module" src="/_astro/hoisted.Dn1LBlWI.js"></script></head> <div class="wrapper"> <div class="header-wrapper"> <div class="header-left"> <a class="nav-link site-heading" href="/">tjex</a> </div><div class="header-right"> <button class="no-outline" id="themeToggle" aria-label="theme toggle" data-astro-cid-lfoluaxz> <svg id="icon-toggle" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 120 120" width="40" height="40" xml:space="preserve" data-astro-cid-lfoluaxz> <g data-astro-cid-lfoluaxz> <path d="M60,16.005c0,0,0.001,19.736,0.001,43.994c0,24.258-0.001,43.995-0.001,43.995c-24.258,0-43.994-19.736-43.994-43.995
            C16.006,35.742,35.742,16.005,60,16.005 M60,5.005C29.627,5.005,5.006,29.626,5.006,60c0,30.372,24.622,54.995,54.994,54.995
            S114.995,90.371,114.995,60C114.995,29.626,90.372,5.005,60,5.005L60,5.005z" data-astro-cid-lfoluaxz></path> </g> </svg> </button>  <!--
is:inline includes the script directly into the page, instead 
of budling it separately (Astro specific). This decreases load 
time, which is important here to avoid theme flashing
--> <script>
  const themeToggle = document.getElementById("themeToggle");
  const getTheme = () => localStorage.getItem("theme") || "dark";
  const setTheme = (theme) => {
    localStorage.setItem("theme", theme);
    document.documentElement.dataset.theme = theme;
    document.body.classList.add(theme);
  };

  // add the current theme from local storage to DOM, which 
  // happens BEFORE rendering.
  setTheme(getTheme())  

  themeToggle.addEventListener("click", () => {
    if (getTheme() == "light") {
      setTheme("dark");
    } else {
      setTheme("light");
    }
  });
</script> </div> <div class="header-center"></div>  </div> <aside class="aside sidebar-left"> <nav class="nav-left"> <ul> <li><a class="nav-link" href="/blog">blog</a></li> <li><a class="nav-link" href="/hacks">hacks</a></li> <li><a class="nav-link" href="/projects">projects</a></li> <li><a class="nav-link" href="/listening">listening</a></li> <li><a class="nav-link" href="/contact">contact</a></li> </ul> </nav> </aside> <main class="main-content">       <article class="post-content__article"> <h1>Open mailto links with terminal applications on MacOS</h1> <p class="post-info"> <span>Tillman Jex, <time>May 25, 2024</time></span><br> <span class="secondary">Tagged: </span> <a href="/tags/terminal">terminal</a>
            <span>, </span><a href="/tags/scripts">scripts</a>
            <span></span> <br> <span class="secondary">License: </span> <a href="https://mit-license.org/" target="_blank" rel="noopener noreferrer">
MIT
</a> <br> <!-- if the post has been modified since original publication -->  <br> <!-- for posts that refer to computer programs used -->  </p>  <p>The process for setting a default application for opening <code>mailto</code> links on Mac
requires the designation of a <code>.app</code> application from
<a href="https://support.apple.com/en-au/102362">within the settings of Mac Mail</a>.</p>
<p>However, if you’re using an email client that does not ship as a <code>.app</code> Mac
application (such as terminal email clients like <code>aerc</code> or <code>mutt/neomutt</code>), then
we need to effectively create a “proxy” application, that simply “passes on the
message”, so to say.</p>
<p>This solution was shared by Maarten Aertsen in response to my question
<a href="https://lists.sr.ht/~rjarry/aerc-discuss/%3CD1FVLZFANBQO.T5Z8R5AVJHKI@tjex.net%3E">over on the aerc message boards</a>.
It’s achieved via Apple Scripts of all things.</p>
<h2 id="solution">Solution</h2>
<p>I use <code>aerc</code>, so <code>which aerc</code> returns the path of <code>/usr/local/bin/aerc</code>.</p>
<p>Open Script Editor and make a new script document, filling it with the
following. Be sure to replace the path of the binary with the location of your
own.</p>
<blockquote>
<p>Note: the way in which the <code>mailto</code> text should be passed to on to your
program may vary.</p>
</blockquote>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>on open location mailtostr</span></span>
<span class="line"><span>	set text item delimiters to {":"}</span></span>
<span class="line"><span>	do shell script "/usr/local/bin/aerc \"" &#x26; mailtostr &#x26; "\""</span></span>
<span class="line"><span>end open location</span></span>
<span class="line"><span></span></span></code></pre>
<p>The magic trick is that instead of saving this script as an apple script, we
save it somewhere as an <em>application</em> (via file -> save). Now in Mac Mail,
navigate to “default mail reader” in settings. The saved application won’t show
by default. Select an alternate app by clicking “select” in the drop down and
designate the application you just saved.</p>
<blockquote>
<p>Note: In my case, the Mac Mail UI didn’t immediately show that it had
successfully selected the application. But upon closing and reopening, it did.
The icon for the application will be a little script icon.</p>
</blockquote>
<p>Now when you click on a <code>mailto</code> link, the application will execute the binary,
passing on the <code>mailto</code> link.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>If things aren’t working, you can save a new application with the following
script:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="applescript"><code><span class="line"><span style="color:#F97583">on</span><span style="color:#79B8FF"> open location</span><span style="color:#E1E4E8"> mailtostr</span></span>
<span class="line"><span style="color:#F97583">	set</span><span style="color:#79B8FF"> text item delimiters</span><span style="color:#F97583"> to</span><span style="color:#E1E4E8"> {</span><span style="color:#9ECBFF">":"</span><span style="color:#E1E4E8">}</span></span>
<span class="line"><span style="color:#79B8FF">	do shell script</span><span style="color:#9ECBFF"> "echo </span><span style="color:#79B8FF">\"</span><span style="color:#9ECBFF">"</span><span style="color:#F97583"> &#x26;</span><span style="color:#E1E4E8"> mailtostr </span><span style="color:#F97583">&#x26;</span><span style="color:#9ECBFF"> "</span><span style="color:#79B8FF">\"</span><span style="color:#9ECBFF"> > /tmp/test.txt"</span></span>
<span class="line"><span style="color:#F97583">end</span><span style="color:#79B8FF"> open location</span></span>
<span class="line"></span></code></pre>
<p>Then make the file <code>touch /tmp/test.txt</code> and designate Mac Mail to open this
application as the default mail client.</p>
<p>This will simply direct the output of what the script is getting (i.e. the
<code>mailto</code> string) to a text file. Then you can see if there is a format / syntax
issue that is incompatible with your executable.</p> <hr> <div class="neighbourPost"> <a class="prevPost" href="/hacks/neovim-using-pre-commit-and-gitleaks-with-dotfiles"> Catching secrets in bare git repos using gitleaks and hooks </a> <a class="nextPost" href="/hacks/youtube-get-channel-rss-feed-script"> Get rss feed from a Youtube channel </a> </div>  </article>    </main> <aside class="aside sidebar-right"></aside> <div class="footer">
Built with <a href="https://astro.build">Astro</a> and <a href="https://picocss.com">Pico CSS</a> •
<a href="/privacy">Privacy</a> • <a href="/rss.xml" rel="me">RSS</a> </div> </div> </html>