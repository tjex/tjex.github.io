---
// Lists pages with tag x
import type { GetStaticPaths } from "astro";
import Layout from "../../layouts/Page.astro";
import BlogPostPreview from "../../components/BlogPostPreview.astro";
import * as colUtil from "../../scripts/collectionUtil.ts";

export const getStaticPaths: GetStaticPaths = async () => {
  const collectionName = "blog"; 
  const paths = await colUtil.getStaticPaths(collectionName);
  return paths;
}

const { tag } = Astro.params;
const { entries } = Astro.props;

const seoTitle = tag;
const seo = {
    title: seoTitle,
    description: `All posts tagged with ${seoTitle} on tjex.net`,
};
---

<Layout seo={seo}>
    <h1>{tag}</h1>
    <p>Posts tagged with <span class="bubble">{tag}</span></p>
    <article class="blog-page-content__article">
        <section class="postlist">
            {entries.map((post: any) => <BlogPostPreview post={post} />)}
        </section>
    </article>
</Layout>
